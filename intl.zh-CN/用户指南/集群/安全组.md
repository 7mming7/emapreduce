# 安全组 {#concept_ass_5yn_y2b .concept}

目前 E-MapReduce 创建集群的时候需要使用在 E-MapReduce 中创建的安全组。

主要是因为 E-MapReduce 创建的集群只开放了 22 端口，推荐您将 ECS 实例也按照功能划分，放于不同的用户安全组中。例如，E-MapReduce 的安全组为 **E-MapReduce 安全组**，而您已有的安全组为**用户-安全组**，每个安全组按照不同的需要开启不同的访问控制。

如果需要和已有集群进行联动，请参考如下做法。

## 将 E-MapReduce 集群加入现有安全组 {#section_g1h_bzn_y2b .section}

**说明：** 

-   经典网络类型的实例必须加入同一地域下经典网络类型的安全组。
-   专有网络类型的实例必须加入同一专有网络下的安全组。

1.  登录阿里云 [E-MapReduce 控制台](https://emr.console.aliyun.com/)。
2.  单击上方的集群管理页签。
3.  在集群列表中找到需加入安全组的集群条目，单击其操作中的**详情**，即会进入集群详情页。
4.  在集群详情页上，找到**网络信息**下的所属安全组 ID，单击安全组的 ID。
5.  单击左侧的**安全组内实例列表**查看该安全组内所有 ECS 实例 ID/名称。
6.  前往[阿里云 ECS 的管理控制台](https://ecs.console.aliyun.com/#/home)，在左侧导航栏中**实例**。
7.  在实例列表页面中，您会看到很多名字以 emr-xxx 开头的 ECS 实例，这些就是对应的 E-MapReduce 集群中的 ECS。找到需要加入安全组的实例，单击**操作**列下的**管理**。
8.  单击**本实例安全组**。
9.  单击**加入安全组**。
10. 选择需要加入的安全组。如果您需要**加入多个安全组**，选择安全组后单击加入多个安全组，将会显示一个选择栏，选中的安全组自动添加到选择栏中。
11. 单击**确定**。

## 将现有集群加入 E-MapReduce 安全组 {#section_rsc_wyn_y2b .section}

和上面的操作一样，先找到现有集群所在安全组，重复如上的操作，移入 E-MapReduce 的安全组即可。如果是一些零散的机器，也可以直接在 ECS 的控制台界面上选择机器，然后通过下方的批量操作将集群移入 E-MapReduce 的安全组。

## 安全组的规则 {#section_ssc_wyn_y2b .section}

一个 ECS 实例在多个不同的安全组的时候，安全组的规则是"或"的关系。举例来说就是，E-MapReduce 的安全组只开放了 22 端口，而**用户-安全组**开放了所有的端口。当 E-MapReduce 的集群加入**用户-安全组**以后，E-MapReduce 中的机器也会开放所有端口，所以在使用上请特别注意。

