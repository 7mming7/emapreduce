# 临时查询 {#concept_y4g_tch_kfb .concept}

临时查询是adhoc 即席查询的场景，只支持HiveSQL SparkSQL和Shell三种类型，运行临时查询的语句，在页面下方显示日志和查询结果。

## 新建作业 {#section_ibf_v1f_z2b .section}

作业管理中运行作业，会跳转到另外一个页面显示提交日志和运行日志。两者的区别主要是运行场景不同，临时查询针对数据科学家和数据分析师，主要用SQL为工具。

1.  通过主账号登录[阿里云 E-MapReduce 控制台](https://emr.console.aliyun.com/)，进入集群列表页面。
2.  单击上方的数据开发页签，进入项目列表页面。
3.  单击对应项目右侧的**工作流设计**，进入**作业编辑**页面。
4.  单击页面左侧的临时查询页签，进入临时查询页面。
5.  在页面左侧，在需要操作的文件夹上单击右键，选择**新建作业**。
6.  在**新建作业**对话框中，输入作业名称、作业描述，选择作业类型。

    创建作业时作业类型一经确定，不能修改。

7.  单击**确定**。

    **说明：** 您还可以通过在文件夹上单击右键，进行创建子文件夹、重命名文件夹和删除文件夹操作。


## 开发作业 {#section_zgm_x1f_z2b .section}

关于HiveSQL SparkSQL和shell作业的具体开发，请参见EMR用户指南作业部分。

**说明：** 插入OSS路径时，如果选择 OSSREF 文件前缀，系统会把OSS文件下载到集群本地，并添加到classpath中。

-   作业基础设置

    单击页面右上角的**作业设置**，弹出作业设置页面。

    -   添加运行资源：如添加作业执行需依赖的Jar包或UDF等资源，需将资源先上传至OSS。在作页的运行资源中选中该资源后，可以直接在作业中引用该资源。
    -   配置参数：指定作业代码中所引用变量的值。用户可以在代码中引用变量，格式为：$\{变量名\}。单击右侧的加号图标添加key和value，key为变量名，value为变量的值。另外，您还可以根据调度启动时间自定义时间变量， 规则如下：

        -   yyyy 表示4位的年份。
        -   MM 表示月份。
        -   dd 表示天。
        -   hh24 表示小时，12小时制使用 hh。
        -   mm 表示分钟。
        -   ss 表示秒。

            时间变量可以是包含 yyyy 年份的任意时间组合, 同时支持用+和-方式来分别表示提前和延后。例如，变量 $\{yyyy-MM-dd\}表示当前日期，则：

            -   后1年的表示方式： $\{yyyy+Ny\} 或者 $\{yyyy-MM-dd hh:mm:ss+1y\}。
            -   后3月的表示方式： $\{yyyyMM+Nm\}或者 $\{hh:mm:ss yyyy-MM-dd+3m\}。
            -   前5天的表示方式： $\{yyyyMMdd-Nd\}或者 $\{hh:mm:ss yyyy-MM-dd-5d\}。
-   作业高级设置

    在**作业设置**页面，单击**高级设置**页签。

    -   模式：包括YARN和LOCAL两种模式。YARN模式下，作业通过Launcher在YARN上分配资源进行提交。LOCAL模式下，作业在分配的机器上直接运行。
    -   调度参数：设置作业运行yarn队列、CPU、内存和Hadoop用户等信息，可以不设置，作业会直接采用Hadoop集群的默认值。

## 作业执行 {#section_mmj_2bf_z2b .section}

作业开发和配置完成后，您可以单击右上角的**运行**按钮执行作业。

## 查看日志 {#section_ajt_2bf_z2b .section}

作业运行后，您可以在页面下方的日志页签中查看作业的运行日志。

单击结果可切换到结果页签查看输出结果。

