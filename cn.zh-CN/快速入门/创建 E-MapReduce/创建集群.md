# 创建集群 {#concept_nrp_154_y2b .concept}

## 进入创建集群页面 {#section_w2j_2z4_y2b .section}

1.  登录[阿里云 E-MapReduce 控制台集群列表](https://emr.console.aliyun.com/)。
2.  完成 RAM 授权，操作步骤请参见[角色授权](../../../../cn.zh-CN/用户指南/角色授权.md#)。
3.  在上方选择所在的地域（Region），所创建集群将会在对应的地域内，一旦创建后不能修改。
4.  单击右上方的**创建集群**，进行创建。

## 创建集群流程 {#section_rsk_gz4_y2b .section}

要创建集群，您需要继续完成以下三个步骤：

-   软件配置
-   硬件配置
-   基础配置

**步骤1：软件配置**

**配置项说明：**

-   **产品版本**：选择默认最新的软件版本。
-   **集群类型**：目前的EMR提供了。
    -   Hadoop标准的 Hadoop 集群，包含了大部分的 Hadoop 相关的组件，具体的组件信息可以在选择界面的列表中查看。
    -   Kafka独立的 Kafka 集群，提供消息服务。
-   **包含配置**：使用默认的配置，后期可以在管理界面中添加和启停服务。
-   **安全模式**：是否开启集群的 Kerberos 认证功能。一般的个人用户集群无需该功能，默认关闭它。

**步骤2：硬件配置**

**配置项说明：**

-   **付费配置**

    -   **付费类型**测试的场景下使用按量开始，测试都正常了以后。可以新建一个包月的生产集群正式使用。
-   **集群网络配置**

    -   **集群可用区**：一般使用默认的可用区即可。
    -   **网络类型**：推荐使用VPC。若还未创建，可前往[VPC控制台](https://vpc.console.aliyun.com/)进行创建。

        **说明：** 经典网络与专有网络不互通，购买后不能更换网络类型。

    -   **ECS 实例系列**：使用默认最新的系列。
    -   **VPC**：选择在该地域的VPC。
    -   **交换机**：选择在对应的VPC下的在对应可用区的交换机，如果在这个可用区没有可用的交换机，那么就需要前往去创建一个新的使用。
    -   **新建安全组**：一般用户初次来到这里还没有安全组，打开**新建安全组**开关，在**安全组名称**里面填上新的安全组的名字。
    -   **选择安全组**：若已经有在使用的安全组可以直接这里选择使用。
-   **集群节点配置**

    -   **高可用集群**：后续正式集群如果是使用高可用的，测试情况下也打开高可用。
    -   **节点类型**：只需要使用Master和Core，Task可以不用，需要的时候再追加。
    -   **节点配置**： 使用默认配置。
    -   **数据盘类型**：根据需要选择高效或者是SSD云盘。
    -   **数据盘容量**：根据需要调整磁盘容量，推荐至少80G。
    -   **实例数量**：根据需要调整。

**步骤3：基础配置**

**配置项说明：**

-   **基本信息**

    -   **集群名称**：集群的名字，长度限制为 1-64 个字符，仅可使用中文、字母、数字、中划线（-）和下划线（\_）。
-   **运行日志**

    -   **运行日志**：是否保存作业的日志，日志保存默认是打开的。开启后会需要您选择用来保存日志的 OSS 目录位置，会将您的作业的日志保存到该 OSS 存储目录上。当然，您要使用这个功能必须先开通 OSS，同时上传的文件会按照使用的量来计算用户的费用。强烈建议您打开 OSS 日志保存功能，这会对您的作业调试和错误排查有极大的帮助。
    -   **日志路径**：保存日志的 OSS 路径。
    -   **统一Meta数据库**：推荐先关闭。
-   **权限设置** 无需调整，使用默认即可。
-   **登录设置**
    -   **登录密码**：设置 master 节点的登录密码。8 - 30 个字符，且必须同时包含大写字母、小写字母、数字和特殊字符!@\#$%^&\*。

## 配置清单和集群费用 {#section_gtk_gz4_y2b .section}

在配置清单上确认配置和对应的费用。

## 确认创建 {#section_htk_gz4_y2b .section}

当所有的信息都有效填写以后，**创建**按钮会亮起，确认无误后单击**创建**将会创建集群。

**说明：** 

-   若是按量付费集群，集群会立刻开始创建。页面会返回集群列表页，就能看到在列表中有一个**集群创建中**的集群。请耐心等待，集群创建会需要几分钟时间。完成之后集群的状态会切换为**集群空闲**。
-   若是包年包月集群，则会先生成订单，在支付完成订单以后集群才会开始创建。

## 创建失败 {#section_jtk_gz4_y2b .section}

如果创建失败，在集群列表页上会显示**集群创建失败**，将鼠标移动到红色的感叹号上会看到失败原因，如下图所示。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/17840/153690832410549_zh-CN.png)

创建失败的集群可以不用处理，对应的计算资源并没有真正的创建出来。这个集群会在停留3天以后自动隐藏。

